{"version":3,"file":"page-2.js","sources":["../src/js/page-2.js"],"sourcesContent":["import axios from 'axios';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport 'loaders.css/loaders.min.css';\r\n\r\nconst API_KEY = '52176910-9d30b506fbb06ea9df25b7e20';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nconst PER_PAGE = 40;\r\n\r\nconst refs = {\r\n  form: document.getElementById('search-form'),\r\n  input: document.getElementById('search-input'),\r\n  gallery: document.getElementById('gallery'),\r\n  loader: document.getElementById('loader'),\r\n};\r\n\r\nlet lightbox = new SimpleLightbox('.gallery a', {\r\n  captionsData: 'alt',\r\n  captionDelay: 250,\r\n});\r\n\r\nrefs.form.addEventListener('submit', onSearch);\r\n\r\nfunction showLoader() {\r\n  refs.loader.setAttribute('aria-hidden', 'false');\r\n  refs.loader.style.display = 'flex';\r\n}\r\n\r\nfunction hideLoader() {\r\n  refs.loader.setAttribute('aria-hidden', 'true');\r\n  refs.loader.style.display = 'none';\r\n}\r\n\r\nasync function onSearch(e) {\r\n  e.preventDefault();\r\n  const query = refs.input.value.trim();\r\n  if (!query) return;\r\n\r\n  clearGallery();\r\n  showLoader();\r\n\r\n  const params = new URLSearchParams({\r\n    key: API_KEY,\r\n    q: query,\r\n    image_type: 'photo',\r\n    orientation: 'horizontal',\r\n    safesearch: 'true',\r\n    per_page: String(PER_PAGE),\r\n  });\r\n\r\n  try {\r\n    const url = `${BASE_URL}?${params.toString()}`;\r\n    const { data } = await axios.get(url);\r\n\r\n    if (!data.hits || data.hits.length === 0) {\r\n      iziToast.info({\r\n        title: 'No results',\r\n        message:\r\n          'Sorry, there are no images matching your search query. Please try again!',\r\n        position: 'topRight',\r\n      });\r\n      return;\r\n    }\r\n\r\n    const markup = buildGalleryMarkup(data.hits);\r\n    refs.gallery.innerHTML = markup;\r\n\r\n    lightbox.refresh();\r\n  } catch (err) {\r\n    console.error(err);\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: 'Bir hata oluştu. Lütfen tekrar deneyin.',\r\n      position: 'topRight',\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n}\r\n\r\nfunction clearGallery() {\r\n  refs.gallery.innerHTML = '';\r\n}\r\n\r\nfunction buildGalleryMarkup(items) {\r\n  return items\r\n    .map(\r\n      ({\r\n        webformatURL,\r\n        largeImageURL,\r\n        tags,\r\n        likes,\r\n        views,\r\n        comments,\r\n        downloads,\r\n      }) => `\r\n<li class=\"gallery-item\">\r\n  <a href=\"${largeImageURL}\" class=\"card-link\">\r\n    <img src=\"${webformatURL}\" alt=\"${escapeHtml(tags)}\" loading=\"lazy\" />\r\n    <div class=\"card-stats\">\r\n      <span><b>Likes</b> ${likes}</span>\r\n      <span><b>Views</b> ${views}</span>\r\n      <span><b>Comments</b> ${comments}</span>\r\n      <span><b>Downloads</b> ${downloads}</span>\r\n    </div>\r\n  </a>\r\n</li>`\r\n    )\r\n    .join('');\r\n}\r\n\r\nfunction escapeHtml(str) {\r\n  return str.replace(\r\n    /[&<>\"']/g,\r\n    m =>\r\n      ({\r\n        '&': '&amp;',\r\n        '<': '&lt;',\r\n        '>': '&gt;',\r\n        '\"': '&quot;',\r\n        \"'\": '&#39;',\r\n      }[m])\r\n  );\r\n}\r\n"],"names":["API_KEY","BASE_URL","PER_PAGE","refs","lightbox","SimpleLightbox","onSearch","showLoader","hideLoader","e","query","clearGallery","params","url","data","axios","iziToast","markup","buildGalleryMarkup","err","items","webformatURL","largeImageURL","tags","likes","views","comments","downloads","escapeHtml","str","m"],"mappings":"sJAOA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GAEXC,EAAO,CACX,KAAM,SAAS,eAAe,aAAa,EAC3C,MAAO,SAAS,eAAe,cAAc,EAC7C,QAAS,SAAS,eAAe,SAAS,EAC1C,OAAQ,SAAS,eAAe,QAAQ,CAC1C,EAEA,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAEDF,EAAK,KAAK,iBAAiB,SAAUG,CAAQ,EAE7C,SAASC,GAAa,CACpBJ,EAAK,OAAO,aAAa,cAAe,OAAO,EAC/CA,EAAK,OAAO,MAAM,QAAU,MAC9B,CAEA,SAASK,GAAa,CACpBL,EAAK,OAAO,aAAa,cAAe,MAAM,EAC9CA,EAAK,OAAO,MAAM,QAAU,MAC9B,CAEA,eAAeG,EAASG,EAAG,CACzBA,EAAE,eAAc,EAChB,MAAMC,EAAQP,EAAK,MAAM,MAAM,KAAI,EACnC,GAAI,CAACO,EAAO,OAEZC,IACAJ,IAEA,MAAMK,EAAS,IAAI,gBAAgB,CACjC,IAAKZ,EACL,EAAGU,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,OAAOR,CAAQ,CAC7B,CAAG,EAED,GAAI,CACF,MAAMW,EAAM,GAAGZ,CAAQ,IAAIW,EAAO,SAAU,CAAA,GACtC,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAM,IAAIF,CAAG,EAEpC,GAAI,CAACC,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CACxCE,EAAS,KAAK,CACZ,MAAO,aACP,QACE,2EACF,SAAU,UAClB,CAAO,EACD,MACD,CAED,MAAMC,EAASC,EAAmBJ,EAAK,IAAI,EAC3CX,EAAK,QAAQ,UAAYc,EAEzBb,EAAS,QAAO,CACjB,OAAQe,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjBH,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0CACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRR,GACD,CACH,CAEA,SAASG,GAAe,CACtBR,EAAK,QAAQ,UAAY,EAC3B,CAEA,SAASe,EAAmBE,EAAO,CACjC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,aAECL,CAAa;AAAA,gBACVD,CAAY,UAAUO,EAAWL,CAAI,CAAC;AAAA;AAAA,2BAE3BC,CAAK;AAAA,2BACLC,CAAK;AAAA,8BACFC,CAAQ;AAAA,+BACPC,CAAS;AAAA;AAAA;AAAA,MAInC,EACA,KAAK,EAAE,CACZ,CAEA,SAASC,EAAWC,EAAK,CACvB,OAAOA,EAAI,QACT,WACAC,IACG,CACC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,OACN,GAACA,CAAC,CACT,CACA"}